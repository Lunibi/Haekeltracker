<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ðŸ§¶ HÃ¤kel-Tracker</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <link rel="stylesheet" href="styles.css">
</head>
<body class="bg-stone-50 text-stone-900 pb-24">

    <div id="app">
        <header class="bg-white border-b border-stone-200 sticky top-0 z-20 p-4 flex justify-between items-center shadow-sm">
            <h1 class="text-xl font-bold flex items-center gap-2 text-rose-600">
                <span>ðŸ§¶</span> HÃ¤kel-Tracker
            </h1>
            <div class="flex gap-2">
                <button onclick="setView('projects')" id="btn-projects" class="p-3 rounded-xl transition bg-rose-100 text-rose-700">
                    <i data-lucide="clock"></i>
                </button>
                <button onclick="setView('stats')" id="btn-stats" class="p-3 rounded-xl transition text-stone-400">
                    <i data-lucide="bar-chart-2"></i>
                </button>
            </div>
        </header>

        <main class="max-w-md mx-auto p-4">
            <!-- Projekt Ansicht -->
            <div id="view-projects" class="space-y-6">
                
                <!-- Sektion: Aktives Fokus-Projekt -->
                <div id="active-focus-area" class="min-h-[100px]">
                    <!-- Wird dynamisch befÃ¼llt -->
                </div>

                <div class="flex items-center justify-between px-2">
                    <h2 class="text-xs font-black text-stone-400 uppercase tracking-widest">Alle Projekte</h2>
                    <button onclick="openProjectModal()" class="text-rose-600 font-bold text-sm flex items-center gap-1">
                        <i data-lucide="plus" class="w-4 h-4"></i> Neu
                    </button>
                </div>
                
                <div id="project-list-compact" class="space-y-2">
                    <!-- Kompakte Liste hier -->
                </div>

                <!-- Daten Transfer Bereich -->
                <div class="mt-12 pt-8 border-t border-stone-200 space-y-4">
                    <h3 class="text-xs font-black text-stone-400 uppercase tracking-widest px-2 text-center">Backup & Transfer</h3>
                    <div class="grid grid-cols-2 gap-3">
                        <button onclick="exportData()" class="flex items-center justify-center gap-2 bg-white border border-stone-200 py-3 rounded-xl text-stone-600 active:bg-stone-50 transition-all shadow-sm">
                            <i data-lucide="download" class="w-4 h-4 text-rose-500"></i>
                            <span class="text-[10px] font-bold uppercase tracking-tight">Exportieren</span>
                        </button>
                        <button onclick="importData()" class="flex items-center justify-center gap-2 bg-white border border-stone-200 py-3 rounded-xl text-stone-600 active:bg-stone-50 transition-all shadow-sm">
                            <i data-lucide="upload" class="w-4 h-4 text-rose-500"></i>
                            <span class="text-[10px] font-bold uppercase tracking-tight">Importieren</span>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Statistik Ansicht -->
            <div id="view-stats" class="space-y-6 hidden animate-in">
                <h2 class="text-xl font-bold px-2">Statistiken</h2>
                <div class="bg-white p-6 rounded-[2rem] border border-stone-100 shadow-sm">
                    <h3 class="text-xs font-black text-stone-400 uppercase tracking-widest mb-4 flex items-center gap-2">
                        <i data-lucide="calendar" class="w-3 h-3 text-rose-400"></i> AktivitÃ¤t der letzten Tage
                    </h3>
                    <div id="daily-stats" class="space-y-4"></div>
                </div>
                <div class="bg-rose-600 text-white p-8 rounded-[2rem] shadow-xl shadow-rose-100 text-center">
                    <p class="text-rose-200 text-xs font-bold uppercase tracking-widest mb-2">Gesamtzeit an der Nadel</p>
                    <p id="total-time-display" class="text-4xl font-black">0h 0m 0s</p>
                </div>
            </div>
        </main>

        <!-- Modals -->
        <div id="modal-manual-time" class="fixed inset-0 bg-stone-900/40 backdrop-blur-sm z-50 flex items-center justify-center p-4 hidden">
            <div class="bg-white w-full max-w-xs rounded-[2.5rem] p-8 shadow-2xl animate-in">
                <h3 id="manual-modal-title" class="text-xl font-extrabold mb-2 text-center text-stone-900">Zeit hinzufÃ¼gen</h3>
                <p id="manual-project-name" class="text-stone-400 text-[10px] text-center mb-6 uppercase font-black tracking-widest"></p>
                <div class="grid grid-cols-3 gap-3 mb-8 text-center">
                    <div>
                        <input type="number" id="manual-h" placeholder="0" class="w-full text-center text-2xl font-black bg-stone-50 border-2 border-transparent focus:border-rose-300 focus:bg-white rounded-2xl py-3 outline-none transition-all">
                        <label class="text-[10px] uppercase font-black text-stone-400 mt-2 block tracking-tighter">Stunden</label>
                    </div>
                    <div>
                        <input type="number" id="manual-m" placeholder="0" class="w-full text-center text-2xl font-black bg-stone-50 border-2 border-transparent focus:border-rose-300 focus:bg-white rounded-2xl py-3 outline-none transition-all">
                        <label class="text-[10px] uppercase font-black text-stone-400 mt-2 block tracking-tighter">Minuten</label>
                    </div>
                    <div>
                        <input type="number" id="manual-s" placeholder="0" class="w-full text-center text-2xl font-black bg-stone-50 border-2 border-transparent focus:border-rose-300 focus:bg-white rounded-2xl py-3 outline-none transition-all">
                        <label class="text-[10px] uppercase font-black text-stone-400 mt-2 block tracking-tighter">Sekunden</label>
                    </div>
                </div>
                <div class="flex flex-col gap-3">
                    <button onclick="submitManualTime()" class="w-full bg-rose-500 text-white py-4 rounded-2xl font-bold shadow-lg shadow-rose-100 active:scale-95 transition-transform">Speichern</button>
                    <button onclick="closeManualModal()" class="w-full text-stone-400 py-2 text-sm font-bold">Abbrechen</button>
                </div>
            </div>
        </div>

        <div id="modal-project" class="fixed inset-0 bg-stone-900/40 backdrop-blur-sm z-50 flex items-center justify-center p-4 hidden">
            <div class="bg-white w-full max-w-xs rounded-[2.5rem] p-8 shadow-2xl animate-in">
                <h3 class="text-xl font-extrabold mb-6 text-center">Neues Projekt</h3>
                <input type="text" id="project-name-input" onkeydown="if(event.key === 'Enter') submitNewProject()" placeholder="Name des Projekts..." class="w-full text-lg font-bold bg-stone-50 border-2 border-transparent focus:border-rose-300 focus:bg-white rounded-2xl px-6 py-4 outline-none mb-6 transition-all">
                <div class="flex flex-col gap-3">
                    <button onclick="submitNewProject()" class="w-full bg-rose-500 text-white py-4 rounded-2xl font-bold shadow-lg shadow-rose-100 active:scale-95 transition-transform">Erstellen</button>
                    <button onclick="closeProjectModal()" class="w-full text-stone-400 py-2 text-sm font-bold">Abbrechen</button>
                </div>
            </div>
        </div>

        <div id="modal-edit-project" class="fixed inset-0 bg-stone-900/40 backdrop-blur-sm z-50 flex items-center justify-center p-4 hidden">
            <div class="bg-white w-full max-w-xs rounded-[2.5rem] p-8 shadow-2xl animate-in">
                <h3 class="text-xl font-extrabold mb-6 text-center">Projekt bearbeiten</h3>
                <input type="text" id="edit-project-name-input" placeholder="Name des Projekts..." class="w-full text-lg font-bold bg-stone-50 border-2 border-transparent focus:border-rose-300 focus:bg-white rounded-2xl px-6 py-4 outline-none mb-6 transition-all">
                <div class="flex flex-col gap-3">
                    <button onclick="submitEditProject()" class="w-full bg-rose-500 text-white py-4 rounded-2xl font-bold shadow-lg shadow-rose-100 active:scale-95 transition-transform">Speichern</button>
                    <button onclick="closeEditProjectModal()" class="w-full text-stone-400 py-2 text-sm font-bold">Abbrechen</button>
                </div>
            </div>
        </div>

        <div id="modal-data-io" class="fixed inset-0 bg-stone-900/40 backdrop-blur-sm z-50 flex items-center justify-center p-4 hidden">
            <div class="bg-white w-full max-w-md rounded-[2.5rem] p-8 shadow-2xl animate-in">
                <h3 id="io-title" class="text-xl font-extrabold mb-6 text-center">Daten</h3>
                <textarea id="io-textarea" class="w-full h-32 bg-stone-50 border-2 border-transparent focus:border-rose-300 focus:bg-white rounded-2xl px-6 py-4 outline-none mb-6 transition-all font-mono text-xs"></textarea>
                <div id="io-msg" class="hidden text-center text-xs text-green-600 font-bold mb-4">âœ“ In Zwischenablage kopiert!</div>
                <div class="flex flex-col gap-3">
                    <button id="io-primary-btn" class="w-full bg-rose-500 text-white py-4 rounded-2xl font-bold shadow-lg shadow-rose-100 active:scale-95 transition-transform">Aktion</button>
                    <button onclick="closeIoModal()" class="w-full text-stone-400 py-2 text-sm font-bold">SchlieÃŸen</button>
                </div>
            </div>
        </div>
    </div>

    <!-- JavaScript Dateien in der richtigen Reihenfolge laden -->
    <script src="js/data.js"></script>
    <script src="js/storage.js"></script>
    <script src="js/timer.js"></script>
    <script src="js/modals.js"></script>
    <script src="js/projects.js"></script>
    <script src="js/stats.js"></script>
    <script src="js/ui.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
